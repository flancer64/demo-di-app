<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demo app to run in the browser</title>
</head>
<script type="module">
    import Container from 'https://cdn.jsdelivr.net/npm/@teqfw/di@0.30.0/+esm';

    // Create the objects container
    /** @type {TeqFw_Di_Api_Container} */
    const container = new Container();
    container.setDebug(false); // set 'true' to check the container's logs

    // Add path mapping for the sources (app itself and used library)
    const url = new URL(location.href);
    const root = url.pathname.replace('index.html', '');
    const pathApp = url.origin + root + 'src';  // load app sources locally
    const pathLib = 'https://cdn.jsdelivr.net/npm/@flancer64/demo-di-lib@0.2.0/+esm'; // load lib sources from CDN
    const resolver = container.getResolver();
    resolver.addNamespaceRoot('App_', pathApp);
    resolver.addNamespaceRoot('Sample_Lib_', pathLib);

    // Get the application from the container and run it
    const app = await container.get('App_Main');
    app('Hello from the Web!');
</script>
<body>
<h1>Sample for DI</h1>
<p><a href="https://github.com/flancer64/demo-di-app/">sources</a></p>

<h2>Running</h2>
<p>Open browser console to see console log. Expected output:</p>
<pre>
Sample Lib: Creating logger for 'Sample Lib'.
Sample Lib: New instance of the service 'Sample_Lib_Service' is created for the app 'Sample Lib'.
Sample App: Library service running with 'Hello from the Web!' param.
</pre>
</body>
</html>